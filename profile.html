<!DOCTYPE html>
<html>
<head>
  <title>User Profile</title>
  <style>
    /* CSS styling for the page */
    body {
      font-family: Arial, sans-serif;
      background-color: #446999;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .header-box {
      background-color: #0a92f8;
      padding: 10px;
      overflow: hidden; /* Ensures proper alignment of elements */
    }
    .header-box h1 {
      margin: 0;
      text-align: center; /* Center the text */
    }
    .header-btn {
      display: inline-block;
      padding: 8px 16px;
      background-color: white;
      color: #0a92f8;
      border: none;
      text-decoration: none;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
    }
    .header-btn:hover {
      background-color: #f8f8f8;
    }
    .header-btn:active {
      background-color: #e8e8e8;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-box">
      <h1><span id="profile-name"></span></h1>
      <div id="user-info" style="text-align: right;">
        <button id="back-btn" class="header-btn" onclick="redirectToHome()">Back to Home</button>
        <button id="users-btn" class="header-btn" onclick="redirectToUsers()">Users</button>
      </div>
    </div>

    <div id="profile-info"></div>
  </div>

  <script>
    // Retrieve the username from the query parameter
    var urlParams = new URLSearchParams(window.location.search);
    var username = urlParams.get("username");

    // Check if the username is available
    if (username) {
      // Display the profile name on the page
      var profileName = document.getElementById("profile-name");
      profileName.innerText = (username === localStorage.getItem("username")) ? "My Profile" : username + "'s Profile";

      // Retrieve the username from local storage
      var loggedInUser = localStorage.getItem("username");

      // Check if the logged-in user matches the profile being viewed
      if (loggedInUser === username) {
        // Create the welcome message for the logged-in user
        var welcomeMessage = document.createElement("p");
        welcomeMessage.innerText = "Welcome, " + username;
        profileInfo.appendChild(welcomeMessage);
      } else {
        // Create the "Message User" button
        var messageButton = document.createElement("button");
        messageButton.innerText = "Message User";
        messageButton.onclick = function() {
          // Implement the logic to handle messaging the user
          // You can redirect to a message page or perform any other action
          // specific to messaging the user
          console.log("Message User clicked");
        };
        profileInfo.appendChild(messageButton);

        // Create the "Challenge Friend" button
        var challengeButton = document.createElement("button");
        challengeButton.innerText = "Challenge Friend";
        challengeButton.onclick = function() {
          // Implement the logic to handle challenging the user
          // You can redirect to a challenge page or perform any other action
          // specific to challenging the user
          console.log("Challenge Friend clicked");
        };
        profileInfo.appendChild(challengeButton);
      }
    }

    function redirectToHome() {
      window.location.href = "index.html";
    }

    function redirectToUsers() {
      window.location.href = "users.html";
    }
  </script>
</body>
</html>
