<!DOCTYPE html>
<html>
<head>
  <title>User Profile</title>
  <style>
    /* CSS styling for the page */
    body {
      font-family: Arial, sans-serif;
      background-color: #446999;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .header-box {
      background-color: #0a92f8;
      padding: 10px;
      overflow: hidden; /* Ensures proper alignment of elements */
    }
    .header-box h1 {
      margin: 0;
      text-align: center; /* Center the text */
    }
    .profile-info {
      background-color: #04c1cc;
      padding: 20px;
      margin-top: 10px;
      color: white;
    }
    .profile-info h2 {
      margin-top: 0;
      text-align: center;
    }
    .profile-info .btn-container {
      text-align: center;
      margin-top: 20px;
    }
    .profile-info button {
      padding: 10px 20px;
      background-color: #ce5454;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
    }
    .profile-info button:hover {
      background-color: #b33a3a;
    }
    .header-btn {
      display: inline-block;
      padding: 8px 16px;
      background-color: white;
      color: #0a92f8;
      border: none;
      text-decoration: none;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
    }
    .header-btn:hover {
      background-color: #f8f8f8;
    }
    .header-btn:active {
      background-color: #e8e8e8;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-box">
      <h1>User Profile</h1>
    </div>

    <div class="profile-info">
      <h2 id="username"></h2>
      <div class="btn-container" id="btn-container">
        <!-- The buttons will be dynamically added here -->
      </div>
    </div>

    <button id="back-btn" onclick="redirectToHome()">Back to Home</button>
    <button id="users-btn" onclick="redirectToUsers()">Users</button>
    <button id="signout-btn" class="signout-btn" onclick="signOut()">Sign Out</button>
  </div>

  <script>
    // Retrieve the username from the query parameter
    var params = new URLSearchParams(window.location.search);
    var username = params.get("username");

    // Set the username in the page
    document.getElementById("username").textContent = username;

    // Check if the profile belongs to the current user
    var currentUser = localStorage.getItem("username");
    var isCurrentUserProfile = username === currentUser;

    // Function to add buttons based on the profile type
    function addProfileButtons() {
      var btnContainer = document.getElementById("btn-container");

      if (!isCurrentUserProfile) {
        // Other user's profile
        var messageButton = createButton("Message User", "messageUser");
        var challengeButton = createButton("Challenge Friend", "challengeFriend");

        btnContainer.appendChild(messageButton);
        btnContainer.appendChild(challengeButton);
      }
    }

    // Function to create a button
    function createButton(text, id) {
      var button = document.createElement("button");
      button.textContent = text;
      button.setAttribute("id", id);
      button.addEventListener("click", buttonClick);
      return button;
    }

    // Event handler for button clicks
    function buttonClick(event) {
      var buttonId = event.target.id;

      if (buttonId === "messageUser") {
        // Redirect to the message page
        // Implement the logic for the message page
        alert("Implement the logic for the message page");
      } else if (buttonId === "challengeFriend") {
        // Redirect to the challenge page
        // Implement the logic for the challenge page
        alert("Implement the logic for the challenge page");
      }
    }

    function redirectToHome() {
      window.location.href = "index.html";
    }

    function redirectToUsers() {
      window.location.href = "users.html";
    }

    function signOut() {
      localStorage.removeItem("username");
      window.location.href = "index.html";
    }

    // Add the profile buttons
    addProfileButtons();
  </script>
</body>
</html>
