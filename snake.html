<!DOCTYPE html>
<html>
<head>
  <title>Snake Game</title>
  <style>
    /* CSS styling for the page */
    body {
      font-family: Arial, sans-serif;
      background-color: #446999;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .game-board {
      position: relative;
      width: 400px;
      height: 400px;
      background-color: #f8f8f8;
      border: 2px solid #0a92f8;
      margin-bottom: 10px;
    }
    .snake-node {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: #0a92f8;
    }
    .food-node {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: #ce5454;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Snake Game</h1>
    <div class="game-board" tabindex="0"></div>
    <p id="score">Score: 0</p>
    <p id="game-over" style="display: none;">Game Over! Play again?</p>
    <div>
      <button onclick="startGame()">Play</button>
      <button onclick="redirectToProfile()">My Profile</button>
      <button onclick="redirectToHome()">Home</button>
    </div>
  </div>

  <script>
    // Game variables
    var canvasSize = 400;
    var gridSize = 20;
    var snake = [{ x: 200, y: 200 }];
    var food = { x: 0, y: 0 };
    var direction = "";
    var nextDirection = "";
    var intervalId;
    var score = 0;
    var gameBoard = document.querySelector(".game-board");
    var scoreElement = document.getElementById("score");
    var gameOverElement = document.getElementById("game-over");

    // Handle keyboard controls
    document.addEventListener("keydown", function(event) {
      var keyPressed = event.key.toLowerCase();
      if (
        (keyPressed === "w" || keyPressed === "arrowup") &&
        direction !== "down"
      ) {
        nextDirection = "up";
      } else if (
        (keyPressed === "s" || keyPressed === "arrowdown") &&
        direction !== "up"
      ) {
        nextDirection = "down";
      } else if (
        (keyPressed === "a" || keyPressed === "arrowleft") &&
        direction !== "right"
      ) {
        nextDirection = "left";
      } else if (
        (keyPressed === "d" || keyPressed === "arrowright") &&
        direction !== "left"
      ) {
        nextDirection = "right";
      }
    });

    // Start the game
    function startGame() {
      snake = [{ x: 200, y: 200 }];
      direction = "";
      nextDirection = "";
      score = 0;
      scoreElement.textContent = "Score: " + score;
      gameOverElement.style.display = "none";
      generateFood();
      gameBoard.innerHTML = "";
      gameBoard.focus();
      intervalId = setInterval(moveSnake, 150);
    }

    // Generate food at a random position
    function generateFood() {
      var foodX = getRandomPosition();
      var foodY = getRandomPosition();
      food = { x: foodX, y: foodY };
      var foodNode = createNode(foodX, foodY, "food-node");
      gameBoard.appendChild(foodNode);
    }

    // Move the snake
    function moveSnake() {
      var head = { x: snake[0].x, y: snake[0].y };
      direction = nextDirection;

      if (direction === "up") {
        head.y -= gridSize;
      } else if (direction === "down") {
        head.y += gridSize;
      } else if (direction === "left") {
        head.x -= gridSize;
      } else if (direction === "right") {
        head.x += gridSize;
      }

      if (isCollision(head) || isSnakeCollision(head)) {
        clearInterval(intervalId);
        gameOverElement.style.display = "block";
        return;
      }

      snake.unshift(head);

      if (head.x === food.x && head.y === food.y) {
        score += 10;
        scoreElement.textContent = "Score: " + score;
        generateFood();
      } else {
        snake.pop();
      }

      renderSnake();
    }

    // Check if the snake hits the wall
    function isCollision(head) {
      return (
        head.x < 0 ||
        head.x >= canvasSize ||
        head.y < 0 ||
        head.y >= canvasSize
      );
    }

    // Check if the snake collides with itself
    function isSnakeCollision(head) {
      for (var i = 1; i < snake.length; i++) {
        if (head.x === snake[i].x && head.y === snake[i].y) {
          return true;
        }
      }
      return false;
    }

    // Render the snake on the game board
    function renderSnake() {
      gameBoard.innerHTML = "";
      snake.forEach(function(node) {
        var snakeNode = createNode(node.x, node.y, "snake-node");
        gameBoard.appendChild(snakeNode);
      });
    }

    // Create a node at the specified position and class name
    function createNode(x, y, className) {
      var node = document.createElement("div");
      node.className = className;
      node.style.left = x + "px";
      node.style.top = y + "px";
      return node;
    }

    // Get a random position for food generation
    function getRandomPosition() {
      return (
        Math.floor(Math.random() * (canvasSize / gridSize)) * gridSize
      );
    }

    // Redirect to profile.html
    function redirectToProfile() {
      window.location.href = "profile.html";
    }

    // Redirect to index.html
    function redirectToHome() {
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
