<!DOCTYPE html>
<html>
<head>
  <title>Snake Game</title>
  <style>
    /* CSS styling for the page */
    body {
      font-family: Arial, sans-serif;
      background-color: #446999;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .game-board {
      position: relative;
      width: 400px;
      height: 400px;
      background-color: #f8f8f8;
      border: 2px solid #0a92f8;
      margin-bottom: 10px;
    }
    .snake-node {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: #0a92f8;
    }
    .food-node {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: #ce5454; /* Modify this color to change the food color */
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Snake Game</h1>
    <div class="game-board" id="game-board"></div>
    <p id="score">Score: 0</p>
    <p id="game-over"></p>
    <button onclick="startGame()">Play</button>
    <button onclick="resetGame()">Reset</button>
    <button onclick="redirectToProfile()">My Profile</button>
    <button onclick="redirectToHome()">Home</button>
  </div>

  <script>
    // Constants
    const gameBoardSize = 20;
    const snakeSpeed = 200; // Adjust this value to change the snake speed

    // Variables
    let gameBoard;
    let snake;
    let food;
    let direction;
    let score;
    let isGameOver;

    // Game initialization
    function startGame() {
      gameBoard = document.getElementById("game-board");
      snake = [{ x: 10, y: 10 }];
      food = getRandomFoodPosition();
      direction = { x: 0, y: 0 };
      score = 0;
      isGameOver = false;

      // Remove existing snake and food nodes
      clearGameBoard();

      // Add snake and food nodes to the game board
      drawSnake();
      drawFood();

      // Start the game loop
      main();
    }

    // Game loop
    function main() {
      if (isGameOver) {
        return;
      }

      // Update snake position
      updateSnake();

      // Check for game over conditions
      if (isSnakeCollision() || isSnakeOutsideBoard()) {
        gameOver();
        return;
      }

      // Check for food consumption
      if (isFoodConsumed()) {
        // Increase the score
        score++;
        // Generate new food position
        food = getRandomFoodPosition();
        // Add a new tail segment to the snake
        extendSnake();
      }

      // Clear game board
      clearGameBoard();

      // Draw snake and food nodes
      drawSnake();
      drawFood();

      // Update score display
      updateScore();

      // Repeat the game loop
      setTimeout(main, snakeSpeed);
    }

    // Update the snake position
    function updateSnake() {
      const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };
      snake.unshift(head);
      snake.pop();
    }

    // Check if the snake collides with itself or walls
    function isSnakeCollision() {
      const head = snake[0];
      return snake.some((segment, index) => index !== 0 && segment.x === head.x && segment.y === head.y);
    }

    // Check if the snake goes outside the game board
    function isSnakeOutsideBoard() {
      const head = snake[0];
      return head.x < 0 || head.x >= gameBoardSize || head.y < 0 || head.y >= gameBoardSize;
    }

    // Check if the snake consumes the food
    function isFoodConsumed() {
      const head = snake[0];
      return head.x === food.x && head.y === food.y;
    }

    // Extend the snake by adding a new tail segment
    function extendSnake() {
      const tail = { x: snake[snake.length - 1].x, y: snake[snake.length - 1].y };
      snake.push(tail);
    }

    // Game over logic
    function gameOver() {
      isGameOver = true;
      document.getElementById("game-over").textContent = "Game Over! Score: " + score;
    }

    // Draw the snake nodes on the game board
    function drawSnake() {
      snake.forEach((segment, index) => {
        const snakeNode = document.createElement("div");
        snakeNode.style.gridRowStart = segment.y + 1;
        snakeNode.style.gridColumnStart = segment.x + 1;
        snakeNode.classList.add("snake-node");
        gameBoard.appendChild(snakeNode);
      });
    }

    // Draw the food node on the game board
    function drawFood() {
      const foodNode = document.createElement("div");
      foodNode.style.gridRowStart = food.y + 1;
      foodNode.style.gridColumnStart = food.x + 1;
      foodNode.classList.add("food-node");
      gameBoard.appendChild(foodNode);
    }

    // Clear the game board by removing all nodes
    function clearGameBoard() {
      while (gameBoard.firstChild) {
        gameBoard.removeChild(gameBoard.firstChild);
      }
    }

    // Generate a random position for the food
    function getRandomFoodPosition() {
      return {
        x: Math.floor(Math.random() * gameBoardSize),
        y: Math.floor(Math.random() * gameBoardSize),
      };
    }

    // Update the score display
    function updateScore() {
      document.getElementById("score").textContent = "Score: " + score;
    }

    // Reset the game
    function resetGame() {
      clearGameBoard();
      document.getElementById("score").textContent = "Score: 0";
      document.getElementById("game-over").textContent = "";
      isGameOver = false;
    }

    // Redirect to profile.html
    function redirectToProfile() {
      window.location.href = "profile.html";
    }

    // Redirect to index.html
    function redirectToHome() {
      window.location.href = "index.html";
    }

    // Keyboard controls
    document.addEventListener("keydown", (event) => {
      const key = event.key.toLowerCase();
      if (key === "w" && direction.y !== 1) {
        direction = { x: 0, y: -1 };
      } else if (key === "s" && direction.y !== -1) {
        direction = { x: 0, y: 1 };
      } else if (key === "a" && direction.x !== 1) {
        direction = { x: -1, y: 0 };
      } else if (key === "d" && direction.x !== -1) {
        direction = { x: 1, y: 0 };
      }
    });
  </script>
</body>
</html>
